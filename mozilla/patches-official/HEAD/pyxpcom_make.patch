Index: extensions/python/xpcom/src/Makefile.in
===================================================================
RCS file: /cvsroot/mozilla/extensions/python/xpcom/src/Makefile.in,v
retrieving revision 1.12
diff -d -u -r1.12 Makefile.in
--- extensions/python/xpcom/src/Makefile.in	5 Oct 2006 10:44:03 -0000	1.12
+++ extensions/python/xpcom/src/Makefile.in	25 Mar 2007 23:14:08 -0000
@@ -84,9 +84,18 @@
 
 CXXFLAGS += -DPYTHON_SO=\"libpython$(MOZ_PYTHON_VER_DOTTED).so\"
 
+ifeq ($(OS_ARCH),Darwin)
+# Don't use the EXTRA_DSO_LDOPTS from rules.mk, it breaks the python module
+EXTRA_DSO_LDOPTS += $(XPCOM_LIBS) \
+                    $(MOZ_COMPONENT_NSPR_LIBS) \
+                    $(XPCOM_STANDALONE_GLUE_LDOPTS) \
+                    $(NULL)
+  
+else
 EXTRA_DSO_LDOPTS += $(MOZ_COMPONENT_LIBS) \
                     $(XPCOM_GLUE_LDOPTS) \
                     $(NULL)
+endif
 
 include $(topsrcdir)/config/rules.mk
 
Index: extensions/python/xpcom/src/loader/Makefile.in
===================================================================
RCS file: /cvsroot/mozilla/extensions/python/xpcom/src/loader/Makefile.in,v
retrieving revision 1.11
diff -d -u -r1.11 Makefile.in
--- extensions/python/xpcom/src/loader/Makefile.in	5 Oct 2006 10:44:03 -0000	1.11
+++ extensions/python/xpcom/src/loader/Makefile.in	25 Mar 2007 23:14:08 -0000
@@ -1,3 +1,4 @@
+
 # ***** BEGIN LICENSE BLOCK *****
 # Version: MPL 1.1/GPL 2.0/LGPL 2.1
 #
@@ -67,9 +68,18 @@
 
 include $(topsrcdir)/config/config.mk
 
+ifeq ($(OS_ARCH),Darwin)
+# Don't use the EXTRA_DSO_LDOPTS from rules.mk, it breaks the python module
+EXTRA_DSO_LDOPTS += $(XPCOM_LIBS) \
+                    $(MOZ_COMPONENT_NSPR_LIBS) \
+                    $(XPCOM_STANDALONE_GLUE_LDOPTS) \
+                    $(NULL)
+  
+else
 EXTRA_DSO_LDOPTS += $(MOZ_COMPONENT_LIBS) \
                     $(XPCOM_GLUE_LDOPTS) \
                     $(NULL)
+endif
 
 include $(topsrcdir)/config/rules.mk
 
Index: extensions/python/xpcom/src/module/Makefile.in
===================================================================
RCS file: /cvsroot/mozilla/extensions/python/xpcom/src/module/Makefile.in,v
retrieving revision 1.5
diff -d -u -r1.5 Makefile.in
--- extensions/python/xpcom/src/module/Makefile.in	5 Oct 2006 10:44:03 -0000	1.5
+++ extensions/python/xpcom/src/module/Makefile.in	25 Mar 2007 23:14:08 -0000
@@ -70,14 +70,15 @@
 
 ifeq ($(OS_ARCH),Darwin)
 # Don't use the EXTRA_DSO_LDOPTS from rules.mk, it breaks the python module
-  EXTRA_DSO_LDOPTS = -bundle $(MOZ_COMPONENT_LIBS) \
-                     $(XPCOM_GLUE_LDOPTS) \
-                     $(NULL)
+EXTRA_DSO_LDOPTS = -bundle $(XPCOM_LIBS) \
+                    $(MOZ_COMPONENT_NSPR_LIBS) \
+                    $(XPCOM_STANDALONE_GLUE_LDOPTS) \
+                    $(NULL)
   
 else
-  EXTRA_DSO_LDOPTS += $(MOZ_COMPONENT_LIBS) \
-                      $(XPCOM_GLUE_LDOPTS) \
-                      $(NULL)
+EXTRA_DSO_LDOPTS += $(MOZ_COMPONENT_LIBS) \
+                    $(XPCOM_GLUE_LDOPTS) \
+                    $(NULL)
 endif
 IMPORT_LIBRARY		:= $(SHARED_LIBRARY:.pyd=.lib)
 
